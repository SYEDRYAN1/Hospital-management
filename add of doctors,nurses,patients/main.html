<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hospital Management - Main</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; padding: 20px; max-width: 820px; margin: auto; }
    h1 { margin-bottom: 12px; }
    .doctors { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 18px; }
    .doctor-btn { padding: 8px 12px; border: 1px solid #ccc; background: #f8f8f8; border-radius: 6px; cursor: pointer; }
    .doctor-btn.active { background: #0b74de; color: #fff; border-color: #0b74de; }
    .info { border: 1px solid #eee; padding: 12px; border-radius: 6px; background: #fff; }
    .label { color: #666; font-size: 13px; }
    #patient-names { font-weight: 600; }
  </style>
</head>
<body>
  <h1>Hospital Dashboard</h1>

  <p class="label">Click a doctor to show which doctor is selected and their patients:</p>

  <!-- Example doctor list.
       Adjust these buttons to match your real data (add data-doctor & data-patients attributes). -->
  <div class="doctors" id="doctors-list">
    <button type="button" class="doctor-btn" data-doctor="Dr. Alice Morgan" data-patients="John Doe, Jane Smith">Dr. Alice Morgan</button>
    <button type="button" class="doctor-btn" data-doctor="Dr. Brian Lee" data-patients="Michael Brown">Dr. Brian Lee</button>
    <button type="button" class="doctor-btn" data-doctor="Dr. Clara Ruiz" data-patients="">Dr. Clara Ruiz</button>
    <!-- Add more doctor buttons as needed -->
  </div>

  <div class="info" id="selected-info" aria-live="polite">
    <p><span class="label">Doctor:</span> <span id="doctor-name">—</span></p>
    <p><span class="label">Patient(s):</span> <span id="patient-names">—</span></p>
  </div>

  <script>
    (function () {
      // Selectors - change these if your markup differs
      const doctorButtonSelector = '.doctor-btn';
      const doctorsList = document.getElementById('doctors-list');
      const doctorNameEl = document.getElementById('doctor-name');
      const patientNamesEl = document.getElementById('patient-names');

      function formatPatients(csv) {
        if (!csv) return 'No patients';
        const arr = csv.split(',').map(s => s.trim()).filter(Boolean);
        return arr.length ? arr.join(', ') : 'No patients';
      }

      function clearActive() {
        document.querySelectorAll(doctorButtonSelector).forEach(btn => btn.classList.remove('active'));
      }

      function setSelected(doctorText, patientsCsv, clickedBtn) {
        doctorNameEl.textContent = doctorText || '—';
        patientNamesEl.textContent = formatPatients(patientsCsv);
        clearActive();
        if (clickedBtn) clickedBtn.classList.add('active');
      }

      // Attach listeners to existing doctor buttons
      function attachListeners() {
        const buttons = document.querySelectorAll(doctorButtonSelector);
        buttons.forEach(btn => {
          btn.addEventListener('click', function () {
            const doctor = btn.dataset.doctor || btn.textContent.trim();
            const patients = btn.dataset.patients || '';
            setSelected(doctor, patients, btn);
          });
        });
      }

      // If your app dynamically injects doctor buttons later, we can delegate:
      doctorsList.addEventListener('click', function (e) {
        const btn = e.target.closest(doctorButtonSelector);
        if (!btn || !doctorsList.contains(btn)) return;
        const doctor = btn.dataset.doctor || btn.textContent.trim();
        const patients = btn.dataset.patients || '';
        setSelected(doctor, patients, btn);
      });

      // Initialize
      attachListeners();

      // Optional: choose first doctor automatically on load
      const firstBtn = document.querySelector(doctorButtonSelector);
      if (firstBtn) {
        const doctor = firstBtn.dataset.doctor || firstBtn.textContent.trim();
        const patients = firstBtn.dataset.patients || '';
        setSelected(doctor, patients, firstBtn);
      }
    })();
  </script>
</body>
</html>