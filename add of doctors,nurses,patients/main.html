<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nurse Interface</title>
  <link rel="stylesheet" href="main.css">
</head>
<body>

<div class="topbar">
  <button class="menu-icon" id="menuIcon" type="button">Logo</button>

  <div class="tabs">
    <div class="tab active">Doctor</div>
    <div class="tab">Nurse</div>
    <div class="tab">Rooms</div>
    <div class="tab"> lab technicians</div>
    <div class="tab">Appointments</div>
  </div>

  <div class="right-controls">

    <button class="specialization-button" onclick="window.location.href='Category.html'">Specialization</button>

    <!-- Doctor Categories Dropdown -->
    <div class="doctor-categories" id="doctorCategories">
      <a class="category-item" href="Category.html">Specialization</a>
    </div>

    <button class="add-button" id="addBtn" title="Add new">+</button>

    <!-- Dropdown Add Menu -->
    <div class="add-menu" id="addMenu">
      <div class="add-menu-item" data-type="doctor">➕ Add Doctor</div>
      <div class="add-menu-item" data-type="patient">➕ Add Patient</div>
      <div class="add-menu-item" data-type="nurse">➕ Add Nurse</div>
    </div>
  </div>
</div>


  <div class="main-container">
    <div class="sidebar" id="doctorSidebarContainer">
      <div class="search-box">
        <input type="text" id="doctorSearch" placeholder="Search doctor..." />
      </div>
      <div id="doctorSidebar"></div>
      <div class="doctor-timings">
        <h3>Doctor Timings</h3>
        <div id="timingsList"></div>
      </div>
    </div>
  </div>

  <script src="main.js"></script>
  <script>
    // Toggle doctor categories dropdown (accessible button)
    (function() {
      const menuBtn = document.getElementById('menuIcon');
      const cat = document.getElementById('doctorCategories');
      // Ensure initial ARIA state and visibility
      if (!menuBtn.hasAttribute('aria-expanded')) menuBtn.setAttribute('aria-expanded', 'false');
      if (!cat.style.display) cat.style.display = 'none';

      menuBtn.addEventListener('click', function(e) {
        const isHidden = cat.style.display === 'none';
        cat.style.display = isHidden ? 'block' : 'none';
        menuBtn.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
      });

      // Optional: Hide dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!menuBtn.contains(e.target) && !cat.contains(e.target)) {
          cat.style.display = 'none';
          menuBtn.setAttribute('aria-expanded', 'false');
        }
      });

      // Make category items actionable: close dropdown and update page when clicked
      const categoryButtons = cat.querySelectorAll('.category-item');
      categoryButtons.forEach(function(btn) {
        btn.addEventListener('click', function(e) {
          const category = btn.getAttribute('data-category') || btn.textContent.trim();
          // Simple visible feedback: update doctor title to show selected category
          const titleEl = document.querySelector('.doctor-title');
          if (titleEl) titleEl.textContent = category;
          // Close dropdown and update aria
          cat.style.display = 'none';
          menuBtn.setAttribute('aria-expanded', 'false');
          // Optionally, you can emit a custom event or call other logic here
          // Example: document.dispatchEvent(new CustomEvent('category:selected', { detail: { category } }));
        });
      });
    })();

    // Load doctor data from CSV
    fetch('Data/DoctorData.csv')
      .then(response => response.text())
      .then(data => {
        const lines = data.split('\n');
        const doctorSidebar = document.getElementById('doctorSidebar');
        const timingsList = document.getElementById('timingsList');
        lines.forEach(line => {
          const [name, specialization, hours] = line.split(';').map(item => item.trim());
          const doctorItem = document.createElement('div');
          doctorItem.className = 'doctor-item';
          doctorItem.textContent = `${name} - ${specialization} (${hours})`;
          doctorSidebar.appendChild(doctorItem);

          // Add timings to the timings list
          const timingItem = document.createElement('div');
          timingItem.className = 'timing-item';
          timingItem.textContent = `${name}: ${hours}`;
          timingsList.appendChild(timingItem);
        });
      })
      .catch(error => console.error('Error loading doctor data:', error));
  </script>
</body>
</html>